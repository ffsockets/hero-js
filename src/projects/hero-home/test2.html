<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="./app/autoRefresh.js"></script>
  <script src='/socket.io/socket.io.js'></script>
  <script src="./app/config.js"></script>
  <script src="./app/shareViews.js"></script>
  <script src="./app/herohelper.js"></script>
  <script src="./app/hero.js"></script>
  <script src="./app/spark-md5.min.js"></script>
  <script src="./app/sha256.js"></script>
  <script>
    var hexHash;
    Hero.on = function(data){
      if (data.click === 'import') {
        this.datas(
          {private:sha256(hexHash), name:'walletimport', password:'1'}
        );
      }
    };

    Hero.viewWillAppear = function() {
          hexHash = SparkMD5.hash('Hi there');
          alert(sha256(hexHash));
    };

    Hero.viewWillDisAppear = function() {
    };
    Hero.viewDidload = function() {
    };
    Hero.ui = {
      backgroundColor:'f1f1f1',
      nav:{
        title:'test page',
        navigationBarHidden:false,
      },
      views:
      [
        {
          class:'HeroButton',
          frame:{w:'120',x:'0.5x-60',y:'0.2x',h:'50'},
          title:'import test',
          titleColor:'778899',
          backgroundColor:'eeeeeeee',
          ripple:true,
          click:{click:'import'},
          cornerRadius:5,
        },
        {
          class:'HeroSignature',
          name:'walletimport',
          hidden:true
        }
      ]
    };




    // var log=document.getElementById("log");
		// 	document.getElementById("file").addEventListener("change", function() {
		// 		var blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,
		// 			file = this.files[0],
		// 			chunkSize = 2097152, // read in chunks of 2MB
		// 			chunks = Math.ceil(file.size / chunkSize),
		// 			currentChunk = 0,
		// 			spark = new SparkMD5.ArrayBuffer(),
		// 			frOnload = function(e){
		// 				log.innerHTML+="\nread chunk number "+parseInt(currentChunk+1)+" of "+chunks;
		// 				spark.append(e.target.result); // append array buffer
		// 				currentChunk++;
		// 				if (currentChunk < chunks)
		// 					loadNext();
		// 				else
		// 				   log.innerHTML+="\nfinished loading :)\n\ncomputed hash:\n"+spark.end()+"\n\nyou can select another file now!\n";
		// 			},
		// 			frOnerror = function () {
		// 				log.innerHTML+="\noops, something went wrong.";
		// 			};
		// 		function loadNext() {
		// 			var fileReader = new FileReader();
		// 			fileReader.onload = frOnload;
		// 			fileReader.onerror = frOnerror;
		// 			var start = currentChunk * chunkSize,
		// 				end = ((start + chunkSize) >= file.size) ? file.size : start + chunkSize;
		// 			fileReader.readAsArrayBuffer(blobSlice.call(file, start, end));
		// 		};
		// 		log.style.display="inline-block";
		// 		log.innerHTML="file name: "+file.name+" ("+file.size.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g, ',')+" bytes)\n";
		// 		loadNext();
		// 	});


  </script>
</body>
</html>
